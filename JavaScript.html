<script>
/*jslint browser*/
const phi = (1 + Math.sqrt(5)) / 2; // golden mean
const radius = 2;
const maxRecursions = 100;
//const C = [1 - phi, 0]; // from Wikipedia
//const C = [phi - 2, phi -1]; // from Wikipedia
//const C = [-0.8, 0.156]; // from Wikipedia
//const C = []; // forces creation of Mandelbrot Set
/*
randomly picked from list generated by Mandelbrot Set run
*/
//const C = [-1.39, -0.01499999999999990];
//const C = [-1.145, 0.09499999999999997];
const C = [-0.675, 0.29499999999999993];

function juliaSet(x, y, c, r) {
    "use strict";
    if (Math.sqrt(x * x + y * y) > radius) {
        return r / maxRecursions * maxRecursions;
    }
    if (r === maxRecursions) {
        return 0;
    }
    /*
    z' = z*z + c, z = x + yi, c = ?
    x + yi
    x + yi
    x*x + 2xyi - y*y
    xx - yy + 2xyi + c?, e.g., xx - yy - 0.6 + 2xyi + 0i
    */
    r += 1;
    return juliaSet(x * x - y * y + c[0], 2 * x * y + c[1], c, r);
}

function main() {
    "use strict";
    // Create Canvas
    var myCanvas = document.createElement("canvas");
    var ctx = {};
    var magnificationFactor = 200;
    var panX = 1.5;
    var panY = 1.5;
    var x = 0;
    var y = 0;
    var xp;
    var yp;
    var belongsToSet;
    var c;
    myCanvas.width = 600;
    myCanvas.height = 600;
    document.body.appendChild(myCanvas);
    ctx = myCanvas.getContext("2d");

    // Start drawing
    while (x < myCanvas.width) {
        y = 0;
        while (y < myCanvas.height) {
            xp = x / magnificationFactor - panX;
            yp = y / magnificationFactor - panY;
            c = C.length === 0
                ? [xp, yp]
                : C;
            belongsToSet = juliaSet(xp, yp, c, 0);
            if (belongsToSet === 0) {
                ctx.fillStyle = "#000";
                ctx.fillRect(x, y, 1, 1); // Draw a black pixel
            } else {
                ctx.fillStyle = "hsl(120, 100%, " + belongsToSet + "%)";
                ctx.fillRect(x, y, 1, 1); // Draw a colorful pixel
            }
            y += 1;
        }
        x += 1;
    }
}

main();
</script>